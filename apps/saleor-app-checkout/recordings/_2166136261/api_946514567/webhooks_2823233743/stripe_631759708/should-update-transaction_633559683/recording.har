{
  "log": {
    "_recordingName": "/api/webhooks/stripe/should update transaction",
    "creator": {
      "comment": "persister:fs",
      "name": "Polly.JS",
      "version": "6.0.5"
    },
    "entries": [
      {
        "_id": "ff58b021dcd6ea65c59a1abed43ae21c",
        "_order": 0,
        "cache": {},
        "request": {
          "bodySize": 0,
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "application/json"
            },
            {
              "name": "content-type",
              "value": "application/x-www-form-urlencoded"
            },
            {
              "name": "stripe-version",
              "value": "2022-08-01"
            },
            {
              "name": "user-agent",
              "value": "Stripe/v1 NodeBindings/10.2.0"
            },
            {
              "name": "x-stripe-client-user-agent",
              "value": "{\"bindings_version\":\"10.2.0\",\"lang\":\"node\",\"publisher\":\"stripe\",\"uname\":\"Darwin%20Type-of-Web-MacBook-Pro.local%2021.5.0%20Darwin%20Kernel%20Version%2021.5.0%3A%20Tue%20Apr%2026%2021%3A08%3A37%20PDT%202022%3B%20root%3Axnu-8020.121.3~4%2FRELEASE_ARM64_T6000%20arm64%0A\",\"typescript\":\"false\",\"lang_version\":\"v16.14.0\",\"platform\":\"darwin\",\"httplib\":\"fetch\"}"
            }
          ],
          "headersSize": 747,
          "httpVersion": "HTTP/1.1",
          "method": "GET",
          "queryString": [],
          "url": "https://api.stripe.com/v1/payment_intents/pi_3LXWz9EosEcNBN5m03w4t20q"
        },
        "response": {
          "bodySize": 4485,
          "content": {
            "mimeType": "application/json",
            "size": 4485,
            "text": "{\"id\":\"pi_3LXWz9EosEcNBN5m03w4t20q\",\"object\":\"payment_intent\",\"amount\":921,\"amount_capturable\":0,\"amount_details\":{\"tip\":{}},\"amount_received\":921,\"application\":null,\"application_fee_amount\":null,\"automatic_payment_methods\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_3LXWz9EosEcNBN5m0SPBLpeE\",\"object\":\"charge\",\"amount\":921,\"amount_captured\":921,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_3LXWz9EosEcNBN5m0bqwe2hD\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"PL\",\"line1\":null,\"line2\":null,\"postal_code\":null,\"state\":null},\"name\":\"4242\",\"phone\":null},\"calculated_statement_descriptor\":\"Stripe\",\"captured\":true,\"created\":1660684059,\"currency\":\"usd\",\"customer\":\"cus_MG35vY0kj4h61Y\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":38,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_3LXWz9EosEcNBN5m03w4t20q\",\"payment_method\":\"pm_1LXWz8EosEcNBN5mznWSJNYz\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":null,\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2024,\"fingerprint\":\"7aB2lHdoeemL4wct\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"mandate\":null,\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":null,\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/payment/CAcaFwoVYWNjdF8xTFZad3hFb3NFY05CTjVtKIiw8JcGMgbK6_xOAq46LBYPDgiC64le-7G7nV8n-VDh7UJWfInO2Nynrv2Uyi5bN-PmPttJhB0nymYM\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_3LXWz9EosEcNBN5m0SPBLpeE/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_3LXWz9EosEcNBN5m03w4t20q\"},\"client_secret\":\"pi_3LXWz9EosEcNBN5m03w4t20q_secret_ZR3DEQ1ZWJh6Tfp7KFUrX3U1W\",\"confirmation_method\":\"automatic\",\"created\":1660684059,\"currency\":\"usd\",\"customer\":\"cus_MG35vY0kj4h61Y\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1LXWz8EosEcNBN5mznWSJNYz\",\"payment_method_options\":{\"card\":{\"installments\":null,\"mandate_options\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"processing\":null,\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}"
          },
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-credentials",
              "value": "true"
            },
            {
              "name": "access-control-allow-methods",
              "value": "GET, POST, HEAD, OPTIONS, DELETE"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "access-control-expose-headers",
              "value": "Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required"
            },
            {
              "name": "access-control-max-age",
              "value": "300"
            },
            {
              "name": "cache-control",
              "value": "no-cache, no-store"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "4485"
            },
            {
              "name": "content-type",
              "value": "application/json"
            },
            {
              "name": "date",
              "value": "Tue, 16 Aug 2022 22:19:52 GMT"
            },
            {
              "name": "request-id",
              "value": "req_3Us6lpNqbrLoKE"
            },
            {
              "name": "server",
              "value": "nginx"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=63072000; includeSubDomains; preload"
            },
            {
              "name": "stripe-version",
              "value": "2022-08-01"
            }
          ],
          "headersSize": 597,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "",
          "status": 200,
          "statusText": "OK"
        },
        "startedDateTime": "2022-08-16T22:19:51.534Z",
        "time": 785,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 785
        }
      },
      {
        "_id": "f233fa4d32e2ecf4eb7f8984acc421ab",
        "_order": 0,
        "cache": {},
        "request": {
          "bodySize": 813,
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "application/graphql+json, application/json"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ],
          "headersSize": 174,
          "httpVersion": "HTTP/1.1",
          "method": "POST",
          "postData": {
            "mimeType": "application/json",
            "params": [],
            "text": "{\"query\":\"query OrderTransactions($id: ID!) {\\n  order(id: $id) {\\n    transactions {\\n      ...Transaction\\n      __typename\\n    }\\n    errors {\\n      code\\n      message\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment Transaction on TransactionItem {\\n  id\\n  reference\\n  voidedAmount {\\n    ...Money\\n    __typename\\n  }\\n  refundedAmount {\\n    ...Money\\n    __typename\\n  }\\n  chargedAmount {\\n    ...Money\\n    __typename\\n  }\\n  authorizedAmount {\\n    ...Money\\n    __typename\\n  }\\n  events {\\n    ...TransactionEvent\\n    __typename\\n  }\\n}\\n\\nfragment Money on Money {\\n  currency\\n  amount\\n}\\n\\nfragment TransactionEvent on TransactionEvent {\\n  name\\n  reference\\n}\\n\",\"operationName\":\"OrderTransactions\",\"variables\":{\"id\":\"T3JkZXI6ODIwMDdiOTQtYzc2ZC00MGYxLWE0OGUtNzFjZWFiMGU2OWVi\"}}"
          },
          "queryString": [],
          "url": "https://master.staging.saleor.cloud/graphql/"
        },
        "response": {
          "bodySize": 103,
          "content": {
            "mimeType": "application/json",
            "size": 103,
            "text": "{\"data\":{\"order\":null},\"extensions\":{\"cost\":{\"requestedQueryCost\":2,\"maximumAvailable\":50000}}}"
          },
          "cookies": [],
          "headers": [
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "103"
            },
            {
              "name": "content-type",
              "value": "application/json"
            },
            {
              "name": "date",
              "value": "Mon, 29 Aug 2022 23:14:43 GMT"
            },
            {
              "name": "referrer-policy",
              "value": "same-origin"
            },
            {
              "name": "server",
              "value": "CloudFront"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=31536000; includeSubDomains"
            },
            {
              "name": "vary",
              "value": "Origin, Access-Control-Request-Headers, Access-Control-Request-Method"
            },
            {
              "name": "via",
              "value": "1.1 ba9347086484f25b8da311dec69fb9c2.cloudfront.net (CloudFront)"
            },
            {
              "name": "x-amz-cf-id",
              "value": "-VFPezOssVD-Vm3RoQEhj92iEJnPXYF4u0ltJsJR0JZI6gWdAlR5-A=="
            },
            {
              "name": "x-amz-cf-pop",
              "value": "WAW50-C1"
            },
            {
              "name": "x-cache",
              "value": "Miss from cloudfront"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "x-frame-options",
              "value": "DENY"
            },
            {
              "name": "x-xss-protection",
              "value": "1"
            }
          ],
          "headersSize": 576,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "",
          "status": 200,
          "statusText": "OK"
        },
        "startedDateTime": "2022-08-29T23:14:42.566Z",
        "time": 722,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 722
        }
      },
      {
        "_id": "bbad212698728dc9dc39f3ad9e3b2320",
        "_order": 0,
        "cache": {},
        "request": {
          "bodySize": 801,
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "application/graphql+json, application/json"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ],
          "headersSize": 174,
          "httpVersion": "HTTP/1.1",
          "method": "POST",
          "postData": {
            "mimeType": "application/json",
            "params": [],
            "text": "{\"query\":\"mutation TransactionCreate($id: ID!, $transaction: TransactionCreateInput!, $transactionEvent: TransactionEventInput) {\\n  transactionCreate(\\n    id: $id\\n    transaction: $transaction\\n    transactionEvent: $transactionEvent\\n  ) {\\n    transaction {\\n      id\\n      __typename\\n    }\\n    errors {\\n      code\\n      message\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\",\"operationName\":\"TransactionCreate\",\"variables\":{\"id\":\"T3JkZXI6ODIwMDdiOTQtYzc2ZC00MGYxLWE0OGUtNzFjZWFiMGU2OWVi\",\"transaction\":{\"status\":\"complete\",\"reference\":\"cs_test_b1rFL3ne5vJwFITea5tObeCZleiEKYx9Lpqi9sicSN2iN76A6kIE5F5pTc\",\"type\":\"stripe-card\",\"amountAuthorized\":{\"amount\":9.21,\"currency\":\"USD\"},\"availableActions\":[\"REFUND\"]},\"transactionEvent\":{\"status\":\"SUCCESS\",\"name\":\"checkout.session.completed\"}}}"
          },
          "queryString": [],
          "url": "https://master.staging.saleor.cloud/graphql/"
        },
        "response": {
          "bodySize": 333,
          "content": {
            "mimeType": "application/json",
            "size": 333,
            "text": "{\"errors\":[{\"message\":\"You need one of the following permissions: HANDLE_PAYMENTS\",\"locations\":[{\"line\":2,\"column\":3}],\"path\":[\"transactionCreate\"],\"extensions\":{\"exception\":{\"code\":\"PermissionDenied\"}}}],\"data\":{\"transactionCreate\":null},\"extensions\":{\"cost\":{\"requestedQueryCost\":0,\"maximumAvailable\":50000}}}"
          },
          "cookies": [],
          "headers": [
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "333"
            },
            {
              "name": "content-type",
              "value": "application/json"
            },
            {
              "name": "date",
              "value": "Mon, 29 Aug 2022 23:14:43 GMT"
            },
            {
              "name": "referrer-policy",
              "value": "same-origin"
            },
            {
              "name": "server",
              "value": "CloudFront"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=31536000; includeSubDomains"
            },
            {
              "name": "vary",
              "value": "Origin, Access-Control-Request-Headers, Access-Control-Request-Method"
            },
            {
              "name": "via",
              "value": "1.1 58bdfbab355a53b4cbc6b93312bb8748.cloudfront.net (CloudFront)"
            },
            {
              "name": "x-amz-cf-id",
              "value": "__8-26q6atDWPClsMs0Zm2-u4ffPowBAQukZz4zrhURksuIHVWB3-w=="
            },
            {
              "name": "x-amz-cf-pop",
              "value": "WAW50-C1"
            },
            {
              "name": "x-cache",
              "value": "Miss from cloudfront"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "x-frame-options",
              "value": "DENY"
            },
            {
              "name": "x-xss-protection",
              "value": "1"
            }
          ],
          "headersSize": 576,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "",
          "status": 200,
          "statusText": "OK"
        },
        "startedDateTime": "2022-08-29T23:14:43.308Z",
        "time": 492,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 492
        }
      }
    ],
    "pages": [],
    "version": "1.2"
  }
}
